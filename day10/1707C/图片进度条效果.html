<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
  
  .box {
    width: 100%;
    display: flex;
    border:1px solid black;
  }
  .left {
    flex:4;

  }
  .left img {
    width: 50px;
    height: 50px;
  }
  .right {
    flex:6;
  }
  
  </style>
</head>

<body>


  <input type="file" class="inputFile" multiple>

  <div class="box">
    <div class="left">

    </div>
    <div class="right">

    </div>
  </div>


  <script>
    var inputFile = document.querySelector('.inputFile');
    var box = document.querySelector('.box');
    var left = document.querySelector('.left');
    var right = document.querySelector('.right');

    inputFile.onchange = function (e) {
      // 获取描述信息
      var itemFile = [...e.target.files]


      itemFile.forEach(item => {

        var fr = new FileReader();

        fr.readAsDataURL(item);
        
        // 文件上传的生命周期
        fr.onabort = function () {
          console.log('监听中止')
        }
        fr.onerror = function () {
          console.log('监听error')
        }
        
        fr.onload = function () {
          console.log('过程: load')
          var imgStr = `<div><img src=${this.result}> <span>${item.name}</span> </div>`
          left.innerHTML += imgStr;
        }

        fr.onloadend = function () {
          console.log('结束: end')
        }
        fr.onloadstart = function () {
          console.log('开始: start')
        }
        
        fr.onprogress = function (e) {
          console.log('进程: progress')
          // 进度条  e.loaded 加载进度  item.size 文件总的大小
          var str = `<div style="width:${ e.loaded / item.size * 100 }%;height:35px;background:red;margin:5px 5px;text-align:center;line-height:35px;">${ e.loaded / item.size * 100 }%</div>`;
          right.innerHTML += str;
        }
      })

    }

  </script>



</body>

</html>